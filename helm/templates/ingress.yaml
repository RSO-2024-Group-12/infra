apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: edge-ingress
spec:
  ingressClassName: nginx
  rules:
    - http:
        paths:
          # 1. Specific Microservice Route
          # Matches: /api/orders, /api/orders/123, etc.
          - path: /api/orders
            pathType: Prefix
            backend:
              service:
                name: microservice-narocila-service
                port:
                  number: 80 # Use the 'port' from your Service definition (usually 80)
          - path: /api/shipments
            pathType: Prefix
            backend:
              service:
                name: microservice-posiljanje-service
                port:
                  number: 80 # Use the 'port' from your Service definition (usually 80)
          - path: /v1/izdelki
            pathType: Prefix
            backend:
              service:
                name: microservice-izdelki-service
                port:
                  number: 80 # Use the 'port' from your Service definition (usually 80)
          - path: /v1/kosarica
            pathType: Prefix
            backend:
              service:
                name: microservice-kosarica-service
                port:
                  number: 80 # Use the 'port' from your Service definition (usually 80)
          - path: /v1/nakup
            pathType: Prefix
            backend:
              service:
                name: microservice-nakup-service
                port:
                  number: 80 # Use the 'port' from your Service definition (usually 80)
          - path: /v1/skladisce
            pathType: Prefix
            backend:
              service:
                name: microservice-skladisce-service
                port:
                  number: 80 # Use the 'port' from your Service definition (usually 80)

          # 2. Catch-all Frontend Route
          # Because this is at the bottom, it catches everything else (like /home, /orders, /abc)
          - path: /
            pathType: Prefix
            backend:
              service:
                name: frontend-service
                port:
                  number: 80